{"remainingRequest":"/home/primodeckers/repository/extract-csv/frontend/node_modules/babel-loader/lib/index.js!/home/primodeckers/repository/extract-csv/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/primodeckers/repository/extract-csv/frontend/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/primodeckers/repository/extract-csv/frontend/src/App.vue","mtime":1543930236436},{"path":"/home/primodeckers/repository/extract-csv/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1539204810571},{"path":"/home/primodeckers/repository/extract-csv/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/primodeckers/repository/extract-csv/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/home/primodeckers/repository/extract-csv/frontend/node_modules/@babel/runtime/helpers/builtin/es6/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nimport { baseApiUrl, userKey } from \"@/global\";\nimport { mapState } from \"vuex\";\nimport Header from \"@/components/template/Header\";\nimport Menu from \"@/components/template/Menu\";\nimport Content from \"@/components/template/Content\";\nimport Footer from \"@/components/template/Footer\";\nimport Loading from \"@/components/template/Loading\";\nexport default {\n  name: \"App\",\n  components: {\n    Header: Header,\n    Menu: Menu,\n    Content: Content,\n    Footer: Footer,\n    Loading: Loading\n  },\n  computed: mapState(['isMenuVisible', 'user']),\n  data: function data() {\n    return {\n      validatingToken: true\n    };\n  },\n  methods: {\n    validateToken: function () {\n      var _validateToken = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var json, userData, res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.validatingToken = true;\n                json = localStorage.getItem(userKey);\n                userData = JSON.parse(json);\n                this.$store.commit('setUser', null);\n\n                if (userData) {\n                  _context.next = 8;\n                  break;\n                }\n\n                this.validatingToken = false;\n                this.$router.push({\n                  name: 'auth'\n                });\n                return _context.abrupt(\"return\");\n\n              case 8:\n                _context.next = 10;\n                return axios.post(\"\".concat(baseApiUrl, \"/validateToken\"), userData);\n\n              case 10:\n                res = _context.sent;\n\n                if (res.data) {\n                  this.$store.commit('setUser', userData);\n\n                  if (this.$mq === 'xs' || this.$mq === 'sm') {\n                    this.$store.commit('toggleMenu', false);\n                  }\n                } else {\n                  localStorage.removeItem(userKey);\n                  this.$router.push({\n                    name: 'auth'\n                  });\n                }\n\n                this.validatingToken = false;\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function validateToken() {\n        return _validateToken.apply(this, arguments);\n      };\n    }()\n  },\n  created: function created() {\n    this.validateToken();\n  }\n};",{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAaA,OAAA,KAAA,MAAA,OAAA;AACA,SAAA,UAAA,EAAA,OAAA,QAAA,UAAA;AACA,SAAA,QAAA,QAAA,MAAA;AACA,OAAA,MAAA,MAAA,8BAAA;AACA,OAAA,IAAA,MAAA,4BAAA;AACA,OAAA,OAAA,MAAA,+BAAA;AACA,OAAA,MAAA,MAAA,8BAAA;AACA,OAAA,OAAA,MAAA,+BAAA;AAEA,eAAA;AACA,QAAA,KADA;AAEA,cAAA;AAAA,kBAAA;AAAA,cAAA;AAAA,oBAAA;AAAA,kBAAA;AAAA;AAAA,GAFA;AAGA,YAAA,SAAA,CAAA,eAAA,EAAA,MAAA,CAAA,CAHA;AAIA,QAAA,gBAAA;AACA,WAAA;AACA,uBAAA;AADA,KAAA;AAGA,GARA;AASA,WAAA;AACA,iBADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,qBAAA,eAAA,GAAA,IAAA;AAEA,oBAJA,GAIA,aAAA,OAAA,CAAA,OAAA,CAJA;AAKA,wBALA,GAKA,KAAA,KAAA,CAAA,IAAA,CALA;AAMA,qBAAA,MAAA,CAAA,MAAA,CAAA,SAAA,EAAA,IAAA;;AANA,oBAQA,QARA;AAAA;AAAA;AAAA;;AASA,qBAAA,eAAA,GAAA,KAAA;AACA,qBAAA,OAAA,CAAA,IAAA,CAAA;AAAA,wBAAA;AAAA,iBAAA;AAVA;;AAAA;AAAA;AAAA,uBAcA,MAAA,IAAA,WAAA,UAAA,qBAAA,QAAA,CAdA;;AAAA;AAcA,mBAdA;;AAgBA,oBAAA,IAAA,IAAA,EAAA;AACA,uBAAA,MAAA,CAAA,MAAA,CAAA,SAAA,EAAA,QAAA;;AAEA,sBAAA,KAAA,GAAA,KAAA,IAAA,IAAA,KAAA,GAAA,KAAA,IAAA,EAAA;AACA,yBAAA,MAAA,CAAA,MAAA,CAAA,YAAA,EAAA,KAAA;AACA;AACA,iBANA,MAMA;AACA,+BAAA,UAAA,CAAA,OAAA;AACA,uBAAA,OAAA,CAAA,IAAA,CAAA;AAAA,0BAAA;AAAA,mBAAA;AACA;;AAEA,qBAAA,eAAA,GAAA,KAAA;;AA3BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,GATA;AAuCA,SAvCA,qBAuCA;AACA,SAAA,aAAA;AACA;AAzCA,CAAA","sourcesContent":["<template>\n\t<div id=\"app\" :class=\"{'hide-menu': !isMenuVisible || !user}\">\n\t\t<Header \n\t\t\t:hideToggle=\"!user\"\n\t\t\t:hideUserDropdown=\"!user\" />\n\t\t<Menu v-if=\"user\" />\n\t\t<Loading v-if=\"validatingToken\" />\n\t\t<Content v-else />\n\t\t<Footer />\n\t</div>\n</template>\n\n<script>\nimport axios from \"axios\"\nimport { baseApiUrl, userKey } from \"@/global\"\nimport { mapState } from \"vuex\"\nimport Header from \"@/components/template/Header\"\nimport Menu from \"@/components/template/Menu\"\nimport Content from \"@/components/template/Content\"\nimport Footer from \"@/components/template/Footer\"\nimport Loading from \"@/components/template/Loading\"\n\nexport default {\n\tname: \"App\",\n\tcomponents: { Header, Menu, Content, Footer, Loading },\n\tcomputed: mapState(['isMenuVisible', 'user']),\n\tdata: function() {\n\t\treturn {\n\t\t\tvalidatingToken: true\n\t\t}\n\t},\n\tmethods: {\n\t\tasync validateToken() {\n\t\t\tthis.validatingToken = true\n\n\t\t\tconst json = localStorage.getItem(userKey)\n\t\t\tconst userData = JSON.parse(json)\n\t\t\tthis.$store.commit('setUser', null)\n\n\t\t\tif(!userData) {\n\t\t\t\tthis.validatingToken = false\n\t\t\t\tthis.$router.push({ name: 'auth' })\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst res = await axios.post(`${baseApiUrl}/validateToken`, userData)\n\n\t\t\tif (res.data) {\n\t\t\t\tthis.$store.commit('setUser', userData)\n\t\t\t\t\n\t\t\t\tif(this.$mq === 'xs' || this.$mq === 'sm') {\n\t\t\t\t\tthis.$store.commit('toggleMenu', false)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlocalStorage.removeItem(userKey)\n\t\t\t\tthis.$router.push({ name: 'auth' })\n\t\t\t}\n\n\t\t\tthis.validatingToken = false\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.validateToken()\n\t}\n}\n</script>\n\n<style>\n\t* {\n\t\tfont-family: \"Lato\", sans-serif;\n\t}\n\n\tbody {\n\t\tmargin: 0;\n\t}\n\n\t#app {\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\n\t\theight: 100vh;\n\t\tdisplay: grid;\n\t\tgrid-template-rows: 60px 1fr 40px;\n\t\tgrid-template-columns: 300px 1fr;\n\t\tgrid-template-areas:\n\t\t\t\"header header\"\n\t\t\t\"menu content\"\n\t\t\t\"footer footer\";\n\t}\n\n\t#app.hide-menu {\n\t\tgrid-template-areas:\n\t\t\t\"header header\"\n\t\t\t\"content content\"\n\t\t\t\"footer footer\";\n\t}\n</style>"],"sourceRoot":"src"}]}